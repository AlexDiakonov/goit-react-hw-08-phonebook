(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{23:function(e,t,n){e.exports={navBar:"navBar_navBar__l1Z_d",navLink:"navBar_navLink__15Sab",isActive:"navBar_isActive__3RT8k"}},3:function(e,t,n){e.exports={phonebook:"PhoneBook_phonebook__2DcGW",details:"PhoneBook_details__3ehCp",addContactBtn:"PhoneBook_addContactBtn__Mo0pn",registerForm:"PhoneBook_registerForm__1O8Of",details2:"PhoneBook_details2__2nJeC",emailInput:"PhoneBook_emailInput__2v-0A",submitForm:"PhoneBook_submitForm__2xI-m",contactDetails:"PhoneBook_contactDetails__2Lcd5",contactName:"PhoneBook_contactName__33SH9",removeButton:"PhoneBook_removeButton__Do9_U",formDescription:"PhoneBook_formDescription__3bOPh",searchForm:"PhoneBook_searchForm__aoNcE"}},56:function(e,t,n){e.exports=n(89)},65:function(e,t,n){},85:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),u=n(15),s=n(16),i=n(18),l=n(17),m=n(24),h=n(23),p=n.n(h),b=n(8),d=function(e){return e.auth.token},f=function(e){return e.auth.user.name},g=(n(65),n(12)),O=n.n(g),C=n(2),v={registerReq:Object(C.b)("auth/regReq"),registerSuc:Object(C.b)("auth/regSuc"),registerErr:Object(C.b)("auth/regErr"),tokenReq:Object(C.b)("auth/tokenReq"),tokenSuc:Object(C.b)("auth/tokenSuc"),tokenErr:Object(C.b)("auth/tokenErr"),loginReq:Object(C.b)("auth/loginReq"),loginSuc:Object(C.b)("auth/loginSuc"),loginErr:Object(C.b)("auth/loginErr"),logOutReq:Object(C.b)("auth/logOutReq"),logOutSuc:Object(C.b)("auth/logOutSuc"),logOutErr:Object(C.b)("auth/logOutErr"),getCurrUserReq:Object(C.b)("auth/getCurrUserReq"),getCurrUserSuc:Object(C.b)("auth/getCurrUserSuc"),getCurrUserErr:Object(C.b)("auth/getCurrUserErr")};O.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var E=function(e){O.a.defaults.headers.common.Authorization="Bearer ".concat(e)},j=function(){O.a.defaults.headers.common.Authorization=""},k={register:function(e){return function(t){t(v.registerReq),O.a.post("/users/signup",e).then((function(e){var n=e.data;E(n.token),t(v.registerSuc(n))})).catch((function(e){return t(v.registerErr(e))}))}},login:function(e){return function(t){t(v.loginReq()),O.a.post("/users/login",e).then((function(e){var n=e.data;E(n.token),t(v.loginSuc(n))})).catch((function(e){return t(v.loginErr(e))}))}},logOut:function(){return function(e){e(v.logOutReq()),O.a.post("users/logout").then((function(){j(),e(v.logOutSuc())})).catch((function(t){return e(v.logOutErr(t))}))}},getCurrentUser:function(){return function(e,t){var n=t().auth.token;n&&(E(n),e(v.getCurrUserReq()),O.a.get("users/current").then((function(t){var n=t.data;return e(v.getCurrUserSuc(n))})).catch((function(t){return e(v.getCurrUserErr(t))})))}}};var y=Object(b.b)((function(e){return{name:f(e)}}),{onLogout:k.logOut})((function(e){var t=e.onLogout,n=e.name;return r.a.createElement("div",{className:"userContainer"},r.a.createElement("img",{className:"avatar",src:"https://www.funnyjunksite.com/pictures/wp-content/uploads/2015/08/Funny-Avatar-Photo.jpg",width:"60"}),r.a.createElement("div",{className:"nameContainer"},r.a.createElement("span",null,"Hello there, ",n),r.a.createElement("br",null),r.a.createElement("button",{className:"logoutBTN",onClick:t},"Log Out")))})),S=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.isAuthorised;return r.a.createElement("header",{className:p.a.navBar},r.a.createElement(m.b,{activeClassName:p.a.isActive,className:p.a.navLink,to:"/register"},"Register"),e?r.a.createElement(y,null):r.a.createElement(m.b,{activeClassName:p.a.isActive,className:p.a.navLink,to:"/login"},"Log in"),r.a.createElement(m.b,{activeClassName:p.a.isActive,className:p.a.navLink,to:"/phonebook"},"Phone Book"))}}]),n}(a.Component),N=Object(b.b)((function(e){return{isAuthorised:d(e)}}))(S),_=n(7),B=n(3),w=n.n(B),R=n(25),q=n(51),F=n.n(q),P={addContactRequest:Object(C.b)("contact/addRequest"),addContactSuccess:Object(C.b)("contact/addSuccess"),addContactError:Object(C.b)("contact/addError"),fetchContactsRequest:Object(C.b)("contact/fetchRequest"),fetchContactsSuccess:Object(C.b)("contact/fetchSuccess"),fetchContactsError:Object(C.b)("contact/fetchError"),delContactRequest:Object(C.b)("contact/delContRequest"),delContactsSuccess:Object(C.b)("contact/delContSuccess"),delContactsError:Object(C.b)("contact/delContError"),doFilter:Object(C.b)("contact/filter",(function(e){return{payload:{filter:e}}}))},A=function(e){O.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U={addContact:function(e,t){return function(n){n(P.addContactRequest()),O.a.post("/contacts",{name:e,number:t}).then((function(e){var t=e.data;n(P.addContactSuccess(t))})).catch((function(e){n(P.addContactError(e))}))}},fetchContacts:function(e){return function(t){A(e),t(P.fetchContactsRequest()),O.a.get("/contacts").then((function(e){var n=e.data;t(P.fetchContactsSuccess(n))})).catch((function(e){t(P.fetchContactsError(e))}))}},removeContact:function(e){return function(t){t(P.delContactRequest()),O.a.delete("/contacts/".concat(e)).then((function(){return t(P.delContactsSuccess(e))})).then((function(e){return P.delContactsError(e)}))}}},L=(n(49),n(21)),D=function(e){return e.contacts.items},I=function(e){return e.contacts.filter},x={getContacts:D,getFilterValue:I,getVisibleContacts:Object(L.a)([D,I],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}))};R.a.configure();var M=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",number:""},e.handleChange=function(t){e.setState({name:t.target.value})},e.handleChangeNum=function(t){e.setState({number:t.target.value})},e.notifiation=function(){R.a.error("".concat(e.state.name," is already in list!"),{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})},e.handleSubmit=function(t){t.preventDefault();var n=e.props.contacts,a=e.state.name;if(n.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})))e.notifiation();else{if(0===a.length)return;e.setState({name:"",number:""}),e.props.addContact(e.state.name,e.state.number)}},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return r.a.createElement("form",{className:w.a.submitForm,onSubmit:this.handleSubmit},r.a.createElement("span",{className:w.a.details},"Name: "),r.a.createElement("input",{type:"text",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("span",{className:w.a.details},"Phone:"),r.a.createElement(F.a,{mask:"(999)-999-99-99",type:"text",value:n,onChange:this.handleChangeNum}),r.a.createElement("br",null),r.a.createElement("button",{className:w.a.addContactBtn,onSubmit:this.handleSubmit,type:"submit"},t?"Add ".concat(t):"Add Contact"))}}]),n}(a.Component),H={addContact:U.addContact},V=Object(b.b)((function(e){return{contacts:x.getContacts(e)}}),H)(M);var z={handleFilter:P.doFilter},G=Object(b.b)((function(e){return{value:x.getFilterValue(e)}}),z)((function(e){var t=e.value,n=e.handleFilter;return r.a.createElement("form",{className:w.a.searchForm},r.a.createElement("span",{className:w.a.formDescription},"Find contacts by name"),r.a.createElement("input",{className:w.a.searchInput,onChange:function(e){return n(e.target.value)},value:t,type:"text"}))})),J=n(91),T=n(90);var W,Z={deleteContact:U.removeContact},K=Object(b.b)((function(e){return{contacts:x.getVisibleContacts(e)}}),Z)((function(e){var t=e.contacts,n=e.deleteContact;return r.a.createElement(J.a,{component:"ul"},t.map((function(e){var t=e.name,a=e.id,o=e.number;return r.a.createElement(T.a,{key:a,timeout:300,classNames:"items"},r.a.createElement("li",{key:a},r.a.createElement("span",{className:"".concat(w.a.contactName," ").concat(w.a.contactDetails)},t+":"),r.a.createElement("span",{className:"".concat(w.a.contactPhone," ").concat(w.a.contactDetails)},o),r.a.createElement("button",{className:w.a.removeButton,type:"button",onClick:function(){return n(a)}},"Delete")))})))})),Q=(n(85),n(52)),X=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.auth?this.props.onFetchContacts(this.props.token):this.props.history.replace("/login")}},{key:"componentDidUpdate",value:function(){this.props.auth||this.props.history.replace("/login")}},{key:"render",value:function(){var e=this.props.contacts;return r.a.createElement("div",{className:w.a.phonebook},this.props.auth&&r.a.createElement(Q.a,{type:"circle",bg:!0}),r.a.createElement(T.a,{appear:!0,in:!0,timeout:2e3,unmountOnExit:!0,classNames:"logo"},r.a.createElement("h2",null,"Phonebook")),r.a.createElement(V,null),r.a.createElement("h2",null,"Contacts"),e.length>1&&r.a.createElement(G,null),r.a.createElement(K,null))}}]),n}(a.Component),Y={onFetchContacts:U.fetchContacts},$=Object(b.b)((function(e){return{contacts:x.getContacts(e),token:e.auth.token,auth:d(e)}}),Y)(X),ee=n(30),te=n(5),ne=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",password:"",email:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(te.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onRegister(Object(ee.a)({},e.state)),e.setState({name:"",password:"",email:""})},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.name;return r.a.createElement("form",{className:w.a.registerForm,onSubmit:this.handleSubmit},r.a.createElement("span",{className:w.a.details2},"Name: "),r.a.createElement("input",{className:w.a.regInput,type:"text",name:"name",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("span",{className:w.a.details2},"Password:"),r.a.createElement("input",{className:w.a.regInput,type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("span",{className:w.a.details2},"Email:"),r.a.createElement("input",{className:"".concat(w.a.emailInput," ").concat(w.a.regInput),type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("button",{className:w.a.addContactBtn,onSubmit:this.handleSubmit,type:"submit"},"Register Me"))}}]),n}(a.Component),ae=Object(b.b)(null,{onRegister:k.register})(ne),re=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(te.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(Object(ee.a)({},e.state)),e.setState({email:"",password:""})},e}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(){this.props.isAuth&&this.props.history.replace("/phonebook")}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return r.a.createElement("form",{className:w.a.registerForm,onSubmit:this.handleSubmit},r.a.createElement("span",{className:w.a.details2},"Email:"),r.a.createElement("input",{className:"".concat(w.a.emailInput," ").concat(w.a.regInput),type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("span",{className:w.a.details2},"Password:"),r.a.createElement("input",{className:w.a.regInput,type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("button",{className:w.a.addContactBtn,onSubmit:this.handleSubmit,type:"submit"},"Log Me In"))}}]),n}(a.Component),oe={phonebook:{path:"/phonebook",Component:$},register:{path:"/register",Component:ae},login:{path:"/login",Component:Object(b.b)((function(e){return{isAuth:d(e)}}),{onLogin:k.login})(re)}},ce=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetUser()}},{key:"render",value:function(){var e=oe.phonebook,t=oe.register,n=oe.login;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null),r.a.createElement(_.d,null,r.a.createElement(_.b,{path:e.path,component:e.Component}),r.a.createElement(_.b,{path:t.path,component:t.Component}),r.a.createElement(_.b,{path:n.path,component:n.Component}),this.props.isAuth?r.a.createElement(_.a,{to:e.path}):r.a.createElement(_.a,{to:n.path})))}}]),n}(a.Component),ue=Object(b.b)((function(e){return{isAuth:d(e)}}),{onGetUser:k.getCurrentUser})(ce),se=n(31),ie=n(10);R.a.configure();var le,me,he,pe=Object(C.c)([],(W={},Object(te.a)(W,P.fetchContactsSuccess,(function(e,t){return t.payload})),Object(te.a)(W,P.addContactSuccess,(function(e,t){var n=t.payload;if(n.name.length>=1)return[].concat(Object(se.a)(e),[n]);R.a.info("First, you have to enter the name!",{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0})})),Object(te.a)(W,v.logOutSuc,(function(e){return[]})),Object(te.a)(W,P.delContactsSuccess,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),W)),be=Object(C.c)(null,Object(te.a)({},P.fetchContactsError,(function(e,t){return t.payload}))),de=Object(C.c)("",Object(te.a)({},P.doFilter,(function(e,t){return t.payload.filter}))),fe=Object(ie.c)({items:pe,filter:de,error:be}),ge={name:null,email:null},Oe=Object(C.c)(ge,(le={},Object(te.a)(le,v.registerSuc,(function(e,t){return t.payload.user})),Object(te.a)(le,v.loginSuc,(function(e,t){return t.payload.user})),Object(te.a)(le,v.logOutSuc,(function(){return ge})),Object(te.a)(le,v.getCurrUserSuc,(function(e,t){return t.payload})),le)),Ce=Object(C.c)(null,(me={},Object(te.a)(me,v.registerSuc,(function(e,t){return t.payload.token})),Object(te.a)(me,v.loginSuc,(function(e,t){return t.payload.token})),Object(te.a)(me,v.logOutSuc,(function(){return null})),me)),ve=Object(C.c)(null,(he={},Object(te.a)(he,v.registerErr,(function(e,t){return t.payload})),Object(te.a)(he,v.loginErr,(function(e,t){return t.payload})),Object(te.a)(he,v.logOutErr,(function(e,t){return t.payload})),Object(te.a)(he,v.getCurrUserErr,(function(e,t){return t.payload})),Object(te.a)(he,v.logOutSuc,(function(){return null})),he)),Ee=Object(ie.c)({user:Oe,error:ve,token:Ce}),je=n(36),ke=n(53),ye=n.n(ke),Se=Object(C.d)(),Ne={key:"auth",storage:ye.a,whitelist:["token"]},_e=Object(C.a)({reducer:{contacts:fe,auth:Object(je.a)(Ne,Ee)},middleware:Object(se.a)(Se)}),Be=Object(je.b)(_e),we=_e,Re=(n(88),n(54));c.a.render(r.a.createElement(b.a,{store:we},r.a.createElement(m.a,null,r.a.createElement(Re.a,{loading:null,persistor:Be},r.a.createElement(ue,null)))),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.e531acbd.chunk.js.map